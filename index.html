<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>JsonReader</title>
  <meta name="description" content="JsonReader">
<link rel="stylesheet" href="assets/css/viewer.css">
<link rel="stylesheet" href="assets/css/animate.css">
<link rel="stylesheet" href="assets/css/liquid-slider.css">

<link rel="stylesheet" href="assets/css/style.css">

<script src="assets/js/jquery.js"></script>

<script src="assets/js/parser.js"></script>
<script src="assets/js/steal.js"></script>
  
<script src="assets/js/jquery.easing.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/jquery.liquid-slider.min.js"></script>
<script src="assets/js/xlsx.full.min.js"></script>

<script src="assets/js/load.js"></script>
<script src="assets/js/worksheet.js"></script>
  <!--[if lt IE 9]>
 <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
	<button id="ButtonForFile" onclick="ShowFileChoose();">Скрыть</button>
	<form id="jsonFile" name="jsonFile" enctype="multipart/form-data" method="post">

	  <fieldset>
		<h2>Json File</h2>
		 <input type='file' id='fileinput'>
		 <input type='button' id='btnLoad' value='Load' onclick='loadFile();'>
	  </fieldset>
	</form>
  
 



<script type="text/javascript">

  function ShowFileChoose(){
	  if ($("#jsonFile").css( "display" ) == "none"){
			$("#jsonFile").slideDown();
		    $("#ButtonForFile").html("Скрыть");
	  }
	  else {
			$("#jsonFile").slideUp();
			$("#ButtonForFile").html("Выбрать файл");
	  }
  }
  function loadFile() {
    var input, file, fr;

    if (typeof window.FileReader !== 'function') {
      alert("The file API isn't supported on this browser yet.");
      return;
    }

    input = document.getElementById('fileinput');
    if (!input) {
      alert("Um, couldn't find the fileinput element.");
    }
    else if (!input.files) {
      alert("This browser doesn't seem to support the `files` property of file inputs.");
    }
    else if (!input.files[0]) {
      alert("Please select a file before clicking 'Load'");
    }
    else {
      file = input.files[0];
      fr = new FileReader();
      fr.onload = receivedText;
      fr.readAsText(file);
    }

    function receivedText(e) {
      lines = e.target.result;
	    try {
			$("#slider-id-wrapper").remove();
		}
		catch(err) {
			
		}
		$('<div>', {
			class: 'liquid-slider',
			id: 'slider-id'
		})
		.appendTo('body');
		sourse_array=[];
      CreateTableFromJson($.parseJSON(lines));
	  $("#jsonFile").slideUp();
	  $("#ButtonForFile").html("Выбрать файл");
    }
  }
</script>

</body>
</html>